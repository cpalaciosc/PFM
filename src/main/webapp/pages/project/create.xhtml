<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ac="http://beyondjava.net/angularFacesCore"
	xmlns:p="http://primefaces.org/ui">
<h:body ng-controller="scheduleController">
	<ui:composition template="#{root}/WEB-INF/template/commonLayout.xhtml">
		<ui:define name="header">
            Crear Proyecto
        </ui:define>  
		<ui:define name="javascript">
			<script>
				var projectApp = angular.module('projectApp', [ "angularfaces",'ngAnimate', 'ui.bootstrap' ]);
			</script>
			<script src="/PFM/resources/js/libs/moment.js"></script>
			<script src="/PFM/resources/js/controllers/projectApp.js"></script>
			<script src="/PFM/resources/js/controllers/scheduleController.js"></script>
			<script src="/PFM/resources/js/controllers/projectController.js"></script>
			<script
				src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular-animate.min.js"></script>
			<script
				src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.0/ui-bootstrap.min.js"></script>
			<script
				src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.0/ui-bootstrap-tpls.min.js"></script>
			<script src="/PFM/resources/js/controllers/wizardController.js"></script>
		</ui:define>
		<ui:define name="css">
			<link href="/PFM/resources/css/wizard.css" rel="stylesheet" />
		</ui:define>
		<ui:define name="header">
            Crear Proyecto
        </ui:define>
		<ui:define name="content">
		<c:set var="projectBean" scope="request" value="#{createProjectBean}" />
			<h:form ng-app="projectApp">
				<div novalidate="" ng-controller="wizardController" ng-form="" id="scheduleForm" name="scheduleForm">
					<div>
						<div class="btn-group">
							<button class="btn" onclick="return false;" ng-class="{'btn-primary':isCurrentStep(0)}" >Establecer horario</button>
							<button class="btn" onclick="return false;" ng-class="{'btn-primary':isCurrentStep(1)}">Establecer variables proyecto</button>
						</div>
							<div ng-switch="getCurrentStep()" class="slide-frame">
								<div ng-switch-when="one" class="wave">	
									<fieldset ng-controller="scheduleController">
									<ngsync direction="serverToClient" value="{{projectBean.projectSchedule.getWorkDaysArray()}}"/>
									
										<div class="row" style="margin-top:10px">
											<div class="col-sm-3">
												<label> Días laborales/mes </label>
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.projectSchedule.workDays}}" ng-required="true" label=""/>
											</div>
											<div class="col-sm-2">
												<label> Lunes </label>
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.projectSchedule.mondayHours}}" ng-required="true" label=""/>
											</div>
											<div class="col-sm-2">
												<label> Total horas </label>	
											</div>
											<div class="col-sm-1">
												{{hoursPerWeek()}}
											</div>
										</div>
										<div class="row">
											<div class="col-sm-3"> 	
												<label> Meses laborales/año </label>	
											</div>
											<div class="col-sm-2 right-text">
												{{monthsPerYear}}
											</div>
											<div class="col-sm-2">
												<label> Martes </label>
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.projectSchedule.tuesdayHours}}" ng-required="true" label=""/>
											</div>
											<div class="col-sm-2" >
												<label> Media laboral </label>	
											</div>
											<div class="col-sm-1">
												{{hoursPerDay() | number:2}}
											</div>
										</div>
										<div class="row">
											<div class="col-sm-3" >
												<label> Horas laborales/día </label>	
											</div>
											<div class="col-sm-2 right-text">
												{{hoursPerDay() | number:2}}
											</div>
											<div class="col-sm-2">
												<label> Miercoles </label>
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.projectSchedule.wednesdayHours}}" ng-required="true" label=""/>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-3" >
												<label> Días/año </label>	
											</div>
											<div class="col-sm-2 right-text">
												{{daysPerYear()}}
											</div>
											<div class="col-sm-2">
												<label> Jueves </label>	
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.projectSchedule.thursdayHours}}" ng-required="true" label=""/>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-3">
												<label> Horas/mes </label>	
											</div>
											<div class="col-sm-2 right-text">
												{{hoursPerMonth() | number:2}}
											</div>
											<div class="col-sm-2">
												<label> Viernes </label>	
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.projectSchedule.fridayHours}}" ng-required="true" label=""/>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-3">
												<label> Horas/año </label>	
											</div>
											<div class="col-sm-2 right-text">
												{{hoursPerYear() | number:2}}
											</div>
											<div class="col-sm-2">
												<label> Sábado </label>	
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.projectSchedule.saturdayHours}}" ng-required="true" label=""/>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-5"></div>
											<div class="col-sm-2">
												<label> Domingo </label>	
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.projectSchedule.sundayHours}}" ng-required="true" label=""/>
											</div>
										</div>
									</fieldset>
								</div>
								<div> 
								<div  ng-switch-when="two" class="wave">
									<fieldset ng-controller="projectController">
										<div class="row" style="margin-top:10px">
											<div class="col-sm-3">
												<label> Nombre proyecto </label>
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.project.name}}" ng-required="true" label=""/>
											</div>
											<div class="col-sm-2">
												<label>Meses naturales </label>	
											</div>
											<div class="col-sm-1">
												{{naturalMonths() | number:2}}
											</div>
											<div class="col-sm-2">
												<label>Meses laborales </label>	
											</div>
											<div class="col-sm-2">
												{{workMonths() | number:2}}
											</div>
								  		</div>
								  		<div class="row">
								  			<div class="col-sm-3">
												<label>Fecha de inicio (DD/MM/YYYY)</label>	
											</div>
											<div class="col-sm-2">
												<p:inputMask label=""
													value="{{projectBean.project.startString}}" mask="99/99/9999"
													ng-required="true" />
											</div>
											<div class="col-sm-2">
												<label>Días naturales </label>	
											</div>
											<div class="col-sm-1">
												{{naturalDays}}
											</div>
											<div class="col-sm-2">
												<label>Días laborales </label>	
											</div>
											<div class="col-sm-2">
												{{workDays}}
											</div>
								  		</div>
								  		<div class="row">
								  			<div class="col-sm-3">
												<label>Fecha de fin (DD/MM/YYYY)</label>	
											</div>
											<div class="col-sm-2">
												<p:inputMask label=""
														value="{{projectBean.project.endString}}" mask="99/99/9999"
														ng-required="true" />
											</div>
											<div class="col-sm-3"></div>
											<div class="col-sm-2">
												<label>Horas laborales </label>	
											</div>
											<div class="col-sm-2">
												{{workHours}}
											</div>
								  		</div>
								  		<div class="row">
											<div class="col-sm-3">
												<label>Presupuesto </label>	
											</div>
											<div class="col-sm-2">
												<p:inputText value="{{projectBean.project.cost}}" ng-required="true" label=""/>
											</div>
											<div class="col-sm-2">
												<label>Coste/mes natural </label>	
											</div>
											<div class="col-sm-1">
												{{costNaturalMonth() | number:2}}
											</div>
											<div class="col-sm-2">
												<label>Coste/mes laboral </label>	
											</div>
											<div class="col-sm-2">
												{{costWorkMonth() | number:2}}
											</div>
								  		</div>
								  		<div class="row">
											<div class="col-sm-5"></div>
											<div class="col-sm-2">
												<label>Coste/día natural </label>	
											</div>
											<div class="col-sm-1">
												{{costNaturalDay() | number:2}}
											</div>
											<div class="col-sm-2">
												<label>Coste/día laboral </label>	
											</div>
											<div class="col-sm-2">
												{{costWorkDay() | number:2}}
											</div>
								  		</div>
								  		<div class="row">
											<div class="col-sm-8"></div>
											<div class="col-sm-2">
												<label>Coste/hora laboral </label>	
											</div>
											<div class="col-sm-2">
												{{costWorkHour() | number:2}}
											</div>
								  		</div>
								  		<div class="row">
											<div class="col-sm-8"></div>
											<div class="col-sm-2">
												<label>Personas/mes </label>	
											</div>
											<div class="col-sm-2">
												
											</div>
								  		</div>
								  		<div class="row">
											<div class="col-sm-8"></div>
											<div class="col-sm-2">
												<label>Personas/día </label>	
											</div>
											<div class="col-sm-2">
											</div>
								  		</div>
								  		<div class="row">
											<div class="col-sm-8"></div>
											<div class="col-sm-2">
												<label>Personas/hora </label>	
											</div>
											<div class="col-sm-2">
											</div>
								  		</div>
									</fieldset>
								</div>
								</div>
							</div>
					</div>
					<div>
						<p:commandButton value="Atrás" ng-click="handlePrevious()" ng-show="!isFirstStep()" 
									     icon="ui-icon-arrow-1-w"/>
						<p:commandButton value="{{getNextLabel()}}" ng-click="handleNext()" ng-show="isFirstStep()" 
										 icon="ui-icon-arrow-1-e"/>
						<p:commandButton value="Guardar" action="#{createProjectBean.process}" ng-show="!isFirstStep()" 
										icon="ui-icon-disk" update="growl" ajax="false" />
						<p:button outcome="index.html" value="Volver" icon="ui-icon-arrowreturn-1-w"></p:button>
					</div>
				</div>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>

</html>
